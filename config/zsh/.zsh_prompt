autoload -Uz add-zsh-hook
setopt prompt_subst

# PROMPT_SYMBOL='▷'
PROMPT_SYMBOL=' '

# indicate a job (for example, vim) has been backgrounded
# If there is a job in the background, display a ✱
suspended_jobs() {
    [[ -n "$(jobs 2>/dev/null)" ]] && echo "%{%F{208}%}✱%f"
}

node_prompt() {
    [[ -f package.json || -d node_modules ]] || return
    command -v node >/dev/null 2>&1 || return

    local version=$(node -v 2>/dev/null)
    [[ -n "$version" ]] || return

    echo -n "%F{029}\ue718 $version%{%b%f%}"
}

add-zsh-hook precmd () {
  print -P "\n \e[1m%F{075}%~\e[0m $(node_prompt) $(suspended_jobs)"
}

# Two-line prompt with directory/node on first line, git info on second
export PROMPT=$'%(?.%F{006}.%F{009})$PROMPT_SYMBOL%f '
export RPROMPT=""
